<div class="cb-card {{classList}}" (click)="clicked()"
     [ngClass]="{'has-title':title !=='', 'has-chart':chart,'custom-title':customTitle}">
  <div class="cb-card-header" *ngIf="title !==''">

    <!-- <h3 class="cb-card-title" *ngIf="!useTooltipIcon && titleTooltip; else noTooltipTpl" [tooltip]="titleTooltip" placement="top">
      {{title}}
    </h3> -->

    <!-- <h3 class="cb-card-title" *ngIf="useTooltipIcon && titleTooltip">
      {{title}} <i [ngClass]="useTooltipIconOptions?.useTooltipIconType"
                   [tooltip]="titleTooltip"
                   placement="{{useTooltipIconOptions?.tooltipPosition}}"
                   (mouseover)="hover = true"
                   (mouseleave)="hover = false"
                   [ngStyle]="{
                    'font-size': useTooltipIconOptions?.fontSize,
                    'margin-left': useTooltipIconOptions?.offsetLeft,
                    'color': hover ? useTooltipIconOptions?.hoverColor : useTooltipIconOptions?.color,
                    'cursor': useTooltipIconOptions?.cursorType}">
               </i>
    </h3> -->

    <ng-template #noTooltipTpl>
      <h3 class="cb-card-title" *ngIf="!titleTooltip">{{title}}</h3>
    </ng-template>

    <span *ngIf="!isHeader">
      <span id="{{dropdownBoxId}}" class="dropdown" [ngClass]="{'open': open}"
            *ngIf="dropdownBoxId && menuItems && menuItems.length > 0">

        <span class="dropdown-toggle" (click)="toggleOpen()" aria-haspopup="true" aria-expanded="false">
          <i class="fa fa-ellipsis-v fa-lg" aria-hidden="true"></i>
        </span>
        <div class="dropdown-menu" (clickOutside)="closeDropdown($event)">
          <span *ngFor="let menuItem of menuItems" class="dropdown-item"
                title="{{menuItem.label}}" (click)="emitEventOut($event, menuItem.action)">
            <i *ngIf="menuItem.icon !==''" class="fa {{menuItem.icon}}" aria-hidden="true"></i> {{menuItem.label}}
          </span>
        </div><!--Closure of dropdown-menu-->
      </span>

      <span class="dropdown" [ngClass]="{'open': open}" *ngIf="!dropdownBoxId && menuItems && menuItems.length > 0">
        <span class="dropdown-toggle" (click)="toggleOpen()" aria-haspopup="true" aria-expanded="false">
          <i class="fa fa-ellipsis-v fa-lg" aria-hidden="true"></i>
        </span>
        <div class="dropdown-menu" (clickOutside)="closeDropdown($event)">
          <span *ngFor="let menuItem of menuItems" class="dropdown-item"
                title="{{menuItem.label}}" (click)="emitEventOut($event, menuItem.action)">
            <i *ngIf="menuItem.icon !==''" class="fa {{menuItem.icon}}" aria-hidden="true"></i> {{menuItem.label}}
          </span>
        </div><!--Closure of dropdown-menu-->
      </span>
    </span>
    <span *ngIf="isHeader"  id="{{dropdownBoxId}}">
      <span *ngFor="let headerItem of menuItems; let i = index" (click)="emitEventOut($event, headerItem.action)" class="cb-card-header-divider">
         <span>
           <!-- <i *ngIf="headerItem.icon && headerItem.icon !==''" class="fa {{headerItem.icon}}" aria-hidden="true"></i> -->
           <span *ngIf="i < menuItems.length - 1" class="cb-card-header-label"><span class="cb-card-header-divider">|</span>{{headerItem.label}}</span>
           <span *ngIf="i === menuItems.length - 1" class="cb-card-header-label">{{headerItem.label}}</span>
         </span>
      </span>
    </span>
    <i *ngIf="saveImage" class="fa fa-cloud-download" aria-hidden="true"></i>

    <span *ngIf="internalHeaderLink">
      <span *ngFor="let headerItem of internalHeaderLink" class="menu-header-link">
        <a href="{{headerItem.link}}">{{headerItem.label}}</a>
      </span>
    </span>

  </div><!--Closure of cb-card-header-->

  <div *ngIf="errorState" class="card-error">
    <div class="error-message">{{errorStateMessage}}</div>
    <div class="error-cover" *ngIf="errorImage">
      <img [src]="errorImage">
    </div>
  </div>

  <div class="cb-card-body" *ngIf="!errorState">
    <ng-content></ng-content>
    <cb-loading-indicator [loading]="loading"></cb-loading-indicator>
  </div><!--Closure of cb-card-body-->
  <div class="cb-card-footer" *ngIf="footerMessage !==''">{{footerMessage}}</div><!--Closure of cb-card-footer-->

</div>
